# 数据操作

## 1. 数据插入（INSERT）

INSERT 可以用来将行插入表中，有如下几种方式：

  * 插入完整的行
  * 插入行的一部分
  * 插入某些查询的结果
  
### 1.1 插入完整的行

按照列的顺序添加数据：
```
INSERT INTO 表名 VALUES(值1, 值2, ...);
```

使用列名添加数据：
```
INSERT INTO 表名(列名1, 列名2, ...) VALUES(值1, 值2, ...);
```

### 1.2 插入部分行

如果表的定义允许，则可以在 INSERT 操作中省略某些列，省略的列必须满足以下某个条件：

* 该列定义为允许 NULL 值
* 在表定义中给出默认值。这表示如果不给出值，将使用默认值

### 1.3 插入检索出的数据（INSERT SELECT）

```
INSERT INTO 表1名(列名1, 列名2, ...) SELECT 表2.列名1, 表2.列名2, ... FROM 表2名 WHERE 条件;
```

说明：列名1 和 表2.列名1 可以不相同。

## 表拷贝（CREAT SELECT）

复制表中的所有数据：

```
CREATE TABLE 新表名 AS SELECT * FROM 原表名;
```

复制个别列：

```
CREATE TABLE 新表名 AS SELECT 列1, 列2, ... FROM 原表名;
```

注意：
* 任何 SELECT 选项和子句都可以使用，包括 WHERE 和 GROUP BY
* 可以利用联结从多个表插入数据
* 不管从多少个表中检索数据，数据都只能插入到一个表中

## 2. 更新和删除数据

### 2.1 更新数据（UPDATE）

更新数据有两种方式：

* 更新表中的特定行
* 更新表中的所有行

```
UPDATE 表名 SET 列名1=新值, 列名2=新值, ... WHERE 条件;
```

如果需要除去某个列的值，可以让其等于 NULL（如果表定义允许 NULL）。

注意：使用 WHERE 时需要格外小心，避免更新到错误的范围。不使用 WHERE 时，会更新所有行。

UPDATE 语句中支持使用 SELECT 子查询。???

### 2.2 删除数据（DELETE）

删除数据有两种方式：

* 从表中删除特定的行
* 从表中删除所有行

```
DELETE FROM 表名 WHERE 条件;
```

注意：
* 使用 WHERE 时需要格外小心，避免删除到错误的范围。不使用 WHERE 时，会删除所有行
* 如果行中已有列被作为外键，为了确保引用完整性则不能成功删除

### 2.3 更新和删除的指导原则

* 除非确实打算更新和删除每一行，否则必须 WHERE 子句
* 保证每个表都有主键
* 使用强制实施引用完整性的数据库，这样 DBMS 将不允许删除其数据与其他表相关联的行
